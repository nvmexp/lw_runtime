!!LWgp4.0

# gp4_txfdiv_1.gp4

# bug 442614

PRIMITIVE_IN TRIANGLES;
PRIMITIVE_OUT TRIANGLE_STRIP;
VERTICES_OUT 3;
TEMP coord, size, txqf, color, color2, xy, clod, grad, gradx, grady, bsize;
INT TEMP icoord, iodd, mtxid;
MOV coord, vertex[0].texcoord[0];
MOV size, vertex[0].texcoord[1];
MOV xy.xy, vertex[0].texcoord[2];
MOV bsize.x, vertex[0].texcoord[2].w;
ROUND.S icoord, coord;
FLR.S iodd.xy, xy;
ADD.S iodd.x, iodd.x, iodd.y;
AND.S iodd.x, iodd.x, 1;
ADD.S icoord.w, icoord.w, iodd.x;
MUL coord, coord, size;
FLR.S icoord.xyz, coord;
TXF color, icoord, texture[0], 1D;
MOV color2, color;
MOV coord, vertex[0].texcoord[0];
MOV size, vertex[0].texcoord[1];
MOV xy.xy, vertex[0].texcoord[2];
MOV bsize.x, vertex[0].texcoord[2].w;
ROUND.S icoord, coord;
FLR.S iodd.xy, xy;
ADD.S iodd.x, iodd.x, iodd.y;
NOT.S iodd.x, iodd.x;
AND.S iodd.x, iodd.x, 1;
ADD.S icoord.w, icoord.w, iodd.x;
MUL coord, coord, size;
FLR.S icoord.xyz, coord;
TXF color, icoord, texture[0], 1D;
MOV.S.CC iodd.x, iodd.x;
MOV result.color (EQ.x), color;
MOV result.color (NE.x), color2;
MOV result.position, vertex[0].position;
EMIT;
MOV coord, vertex[1].texcoord[0];
MOV size, vertex[1].texcoord[1];
MOV xy.xy, vertex[1].texcoord[2];
MOV bsize.x, vertex[1].texcoord[2].w;
ROUND.S icoord, coord;
FLR.S iodd.xy, xy;
ADD.S iodd.x, iodd.x, iodd.y;
AND.S iodd.x, iodd.x, 1;
ADD.S icoord.w, icoord.w, iodd.x;
MUL coord, coord, size;
FLR.S icoord.xyz, coord;
TXF color, icoord, texture[0], 1D;
MOV color2, color;
MOV coord, vertex[1].texcoord[0];
MOV size, vertex[1].texcoord[1];
MOV xy.xy, vertex[1].texcoord[2];
MOV bsize.x, vertex[1].texcoord[2].w;
ROUND.S icoord, coord;
FLR.S iodd.xy, xy;
ADD.S iodd.x, iodd.x, iodd.y;
NOT.S iodd.x, iodd.x;
AND.S iodd.x, iodd.x, 1;
ADD.S icoord.w, icoord.w, iodd.x;
MUL coord, coord, size;
FLR.S icoord.xyz, coord;
TXF color, icoord, texture[0], 1D;
MOV.S.CC iodd.x, iodd.x;
MOV result.color (EQ.x), color;
MOV result.color (NE.x), color2;
MOV result.position, vertex[1].position;
EMIT;
MOV coord, vertex[2].texcoord[0];
MOV size, vertex[2].texcoord[1];
MOV xy.xy, vertex[2].texcoord[2];
MOV bsize.x, vertex[2].texcoord[2].w;
ROUND.S icoord, coord;
FLR.S iodd.xy, xy;
ADD.S iodd.x, iodd.x, iodd.y;
AND.S iodd.x, iodd.x, 1;
ADD.S icoord.w, icoord.w, iodd.x;
MUL coord, coord, size;
FLR.S icoord.xyz, coord;
TXF color, icoord, texture[0], 1D;
MOV color2, color;
MOV coord, vertex[2].texcoord[0];
MOV size, vertex[2].texcoord[1];
MOV xy.xy, vertex[2].texcoord[2];
MOV bsize.x, vertex[2].texcoord[2].w;
ROUND.S icoord, coord;
FLR.S iodd.xy, xy;
ADD.S iodd.x, iodd.x, iodd.y;
NOT.S iodd.x, iodd.x;
AND.S iodd.x, iodd.x, 1;
ADD.S icoord.w, icoord.w, iodd.x;
MUL coord, coord, size;
FLR.S icoord.xyz, coord;
TXF color, icoord, texture[0], 1D;
MOV.S.CC iodd.x, iodd.x;
MOV result.color (EQ.x), color;
MOV result.color (NE.x), color2;
MOV result.position, vertex[2].position;
EMIT;
END


