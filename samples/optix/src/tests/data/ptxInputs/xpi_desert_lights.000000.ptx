//
// Generated by LWPU LWVM Compiler
// Compiler built on Tue Sep 25 17:26:26 2012 (1348590386)
// Lwca compilation tools, release 5.0, V0.2.1221
//

.version 3.1
.target sm_20
.address_size 64

	.file	1 "C:/Users/craigh/AppData/Local/Temp/tmpxft_00000ec8_00000000-11_kernel.cpp3.i"
	.file	2 "C:\\Users\\craigh\\AppData\\Local\\Temp\\optix268\\kernel.lw"
	.file	3 "d:\\svn\\realrt\\build\\plugin_data\\optixrenderer_basicrelwrsive\\kernels\\optix\\optix_device.h"
	.file	4 "d:\\svn\\realrt\\build\\plugin_data\\optixrenderer_basicrelwrsive\\kernels\\optix\\internal/optix_internal.h"
	.file	5 "C:/Program Files/LWPU GPU Computing Toolkit/LWCA/v5.0/lwvm/ci_include.h"
	.file	6 "d:/SVN/RealRT/Build/Plugin_Data/OptiXRenderer_BasicRelwrsive/Kernels/OptiX/optixu/optixu_math_namespace.h"
	.file	7 "c:\\program files\\lwpu gpu computing toolkit\\lwca\\v5.0\\include\\device_functions.h"
	.file	8 "c:\\program files\\lwpu gpu computing toolkit\\lwca\\v5.0\\include\\math_functions.h"
.global .align 8 .b8 launchIndex[8];
.global .align 8 .b8 kTopObject[4];
.global .align 8 .b8 eye[12];
.global .align 8 .b8 U[12];
.global .align 8 .b8 V[12];
.global .align 8 .b8 W[12];
.global .align 4 .f32 kContrast;
.global .align 1 .b8 renderOutputBuffer[1];
.global .align 1 .b8 luminanceGPUBuffer[1];
.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail9E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail2E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_xE;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;
.const .align 4 .u32 kLightCacheSize = 5;
.global .align 4 .b8 _ZN21rti_internal_typeinfo11launchIndexE[8] = {82, 97, 121, 0, 8, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo10kTopObjectE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo3eyeE[8] = {82, 97, 121, 0, 12, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo1UE[8] = {82, 97, 121, 0, 12, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo1VE[8] = {82, 97, 121, 0, 12, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo1WE[8] = {82, 97, 121, 0, 12, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo9kContrastE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo15getRenderOutputE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 1 .b8 _ZN21rti_internal_typename11launchIndexE[6] = {117, 105, 110, 116, 50, 0};
.global .align 1 .b8 _ZN21rti_internal_typename10kTopObjectE[9] = {114, 116, 79, 98, 106, 101, 99, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename3eyeE[7] = {102, 108, 111, 97, 116, 51, 0};
.global .align 1 .b8 _ZN21rti_internal_typename1UE[7] = {102, 108, 111, 97, 116, 51, 0};
.global .align 1 .b8 _ZN21rti_internal_typename1VE[7] = {102, 108, 111, 97, 116, 51, 0};
.global .align 1 .b8 _ZN21rti_internal_typename1WE[7] = {102, 108, 111, 97, 116, 51, 0};
.global .align 1 .b8 _ZN21rti_internal_typename9kContrastE[6] = {102, 108, 111, 97, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename15getRenderOutputE[4] = {105, 110, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic11launchIndexE[14] = {114, 116, 76, 97, 117, 110, 99, 104, 73, 110, 100, 101, 120, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic10kTopObjectE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic3eyeE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic1UE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic1VE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic1WE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic9kContrastE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic15getRenderOutputE[8] = {114, 116, 95, 99, 97, 108, 108, 0};
.global .align 1 .b8 _ZN23rti_internal_annotation11launchIndexE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation10kTopObjectE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation3eyeE[13] = {34, 82, 97, 121, 32, 111, 114, 105, 103, 105, 110, 34, 0};
.global .align 1 .b8 _ZN23rti_internal_annotation1UE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation1VE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation1WE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation9kContrastE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation15getRenderOutputE[38] = {40, 32, 82, 97, 100, 105, 97, 110, 99, 101, 80, 114, 100, 32, 114, 97, 100, 105, 97, 110, 99, 101, 80, 114, 100, 44, 32, 105, 110, 116, 32, 116, 105, 109, 101, 32, 41, 0};

.visible .func  (.param .b32 func_retval0) _Z15getRenderOutput11RadiancePrdi(
	.param .align 16 .b8 _Z15getRenderOutput11RadiancePrdi_param_0[32],
	.param .b32 _Z15getRenderOutput11RadiancePrdi_param_1
)
{
	.reg .s32 	%r<2>;


	mov.u32 	%r1, 0;
	st.param.b32	[func_retval0+0], %r1;
	.loc 2 23 1
	ret;
}

.visible .func _Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT_(
	.param .align 4 .b8 _Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT__param_0[4],
	.param .b64 _Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT__param_1,
	.param .b64 _Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT__param_2
)
{
	.reg .s32 	%r<13>;
	.reg .f32 	%f<9>;
	.reg .s64 	%rd<3>;


	ld.param.u32 	%r1, [_Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT__param_0];
	ld.param.u64 	%rd2, [_Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT__param_1];
	ld.param.u64 	%rd1, [_Z7rtTraceI11RadiancePrdEv8rtObjectN5optix3RayERT__param_2];
	.loc 3 1054 1
	ld.f32 	%f6, [%rd2+20];
	ld.f32 	%f5, [%rd2+16];
	ld.f32 	%f4, [%rd2+12];
	ld.f32 	%f3, [%rd2+8];
	ld.f32 	%f2, [%rd2+4];
	ld.f32 	%f1, [%rd2];
	ld.f32 	%f8, [%rd2+32];
	ld.f32 	%f7, [%rd2+28];
	ld.u32 	%r2, [%rd2+24];
	mov.u32 	%r3, 32;
	// inline asm
	call _rt_trace_64, (%r1, %f1, %f2, %f3, %f4, %f5, %f6, %r2, %f7, %f8, %rd1, %r3);
	// inline asm
	.loc 3 1055 2
	ret;
}

.visible .func _ZN5optix8rt_traceEj6float3S0_jffPvj(
	.param .b32 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_0,
	.param .align 4 .b8 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_1[12],
	.param .align 4 .b8 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_2[12],
	.param .b32 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_3,
	.param .b32 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_4,
	.param .b32 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_5,
	.param .b64 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_6,
	.param .b32 _ZN5optix8rt_traceEj6float3S0_jffPvj_param_7
)
{
	.reg .s32 	%r<4>;
	.reg .f32 	%f<9>;
	.reg .s64 	%rd<2>;


	ld.param.u32 	%r1, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_0];
	ld.param.f32 	%f1, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_1];
	ld.param.f32 	%f2, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_1+4];
	ld.param.f32 	%f3, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_1+8];
	ld.param.f32 	%f4, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_2];
	ld.param.f32 	%f5, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_2+4];
	ld.param.f32 	%f6, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_2+8];
	ld.param.u32 	%r2, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_3];
	ld.param.f32 	%f7, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_4];
	ld.param.f32 	%f8, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_5];
	ld.param.u64 	%rd1, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_6];
	ld.param.u32 	%r3, [_ZN5optix8rt_traceEj6float3S0_jffPvj_param_7];
	// inline asm
	call _rt_trace_64, (%r1, %f1, %f2, %f3, %f4, %f5, %f6, %r2, %f7, %f8, %rd1, %r3);
	// inline asm
	.loc 4 161 2
	ret;
}

.visible .entry _Z13rayGeneratiolw(

)
{
	.local .align 16 .b8 	__local_depot3[32];
	.reg .b64 	%SP;
	.reg .b64 	%SPL;
	.reg .s16 	%rc<9>;
	.reg .s32 	%r<27>;
	.reg .f32 	%f<69>;
	.reg .s64 	%rd<17>;


	mov.u64 	%SPL, __local_depot3;
	cvta.local.u64 	%SP, %SPL;
	add.u64 	%rd1, %SP, 0;
	cvta.to.local.u64 	%rd14, %rd1;
	// inline asm
	mov.u32 	%r1, %clock;
	// inline asm
	.loc 2 98 1
	ld.global.u64 	%rd15, [launchIndex];
	cvt.u32.u64 	%r9, %rd15;
	cvt.rn.f32.u32 	%f9, %r9;
	shr.u64 	%rd16, %rd15, 32;
	mov.u32 	%r4, 32;
	cvt.u32.u64 	%r10, %rd16;
	.loc 2 98 1
	cvt.rn.f32.u32 	%f10, %r10;
	.loc 2 99 1
	add.ftz.f32 	%f11, %f9, 0f3F000000;
	ld.global.f32 	%f12, [U+8];
	ld.global.v2.f32 	{%f53, %f54}, [U];
	add.ftz.f32 	%f13, %f10, 0f3F000000;
	ld.global.f32 	%f14, [V+8];
	ld.global.v2.f32 	{%f55, %f56}, [V];
	ld.global.f32 	%f15, [W+8];
	ld.global.v2.f32 	{%f57, %f58}, [W];
	fma.rn.ftz.f32 	%f18, %f55, %f13, %f57;
	fma.rn.ftz.f32 	%f21, %f56, %f13, %f58;
	fma.rn.ftz.f32 	%f22, %f14, %f13, %f15;
	fma.rn.ftz.f32 	%f24, %f53, %f11, %f18;
	fma.rn.ftz.f32 	%f26, %f54, %f11, %f21;
	fma.rn.ftz.f32 	%f27, %f12, %f11, %f22;
	mul.ftz.f32 	%f28, %f26, %f26;
	fma.rn.ftz.f32 	%f29, %f24, %f24, %f28;
	fma.rn.ftz.f32 	%f30, %f27, %f27, %f29;
	.loc 5 996 5
	sqrt.approx.ftz.f32 	%f31, %f30;
	.loc 2 99 1
	rcp.approx.ftz.f32 	%f32, %f31;
	mov.f32 	%f33, 0f3F800000;
	.loc 2 99 1
	mul.ftz.f32 	%f4, %f24, %f32;
	mul.ftz.f32 	%f5, %f26, %f32;
	mul.ftz.f32 	%f6, %f27, %f32;
	ld.global.f32 	%f3, [eye+8];
	ld.global.v2.f32 	{%f59, %f60}, [eye];
	mov.u32 	%r3, 0;
	.loc 2 101 1
	st.local.u32 	[%rd14+16], %r3;
	mov.f32 	%f7, 0f00000000;
	.loc 2 101 1
	st.local.v4.f32 	[%rd14], {%f7, %f7, %f7, %f33};
	ld.global.u32 	%r2, [kTopObject];
	mov.f32 	%f8, 0f447A0000;
	// inline asm
	call _rt_trace_64, (%r2, %f59, %f60, %f3, %f4, %f5, %f6, %r3, %f7, %f8, %rd1, %r4);
	// inline asm
	.loc 2 118 1
	ld.global.f32 	%f34, [kContrast];
	ld.local.v4.f32 	{%f65, %f66, %f67, %f68}, [%rd14];
	mul.ftz.f32 	%f36, %f67, %f34;
	.loc 5 633 5
	cvt.sat.ftz.f32.f32 	%f37, %f36;
	.loc 2 118 1
	mul.ftz.f32 	%f38, %f37, 0f437F0000;
	.loc 5 1386 5
	cvt.rzi.ftz.u32.f32 	%r14, %f38;
	.loc 2 118 1
	cvt.u8.u32 	%rc1, %r14;
	mul.ftz.f32 	%f40, %f66, %f34;
	.loc 5 633 5
	cvt.sat.ftz.f32.f32 	%f41, %f40;
	.loc 2 118 1
	mul.ftz.f32 	%f42, %f41, 0f437F0000;
	.loc 5 1386 5
	cvt.rzi.ftz.u32.f32 	%r15, %f42;
	.loc 2 118 1
	cvt.u8.u32 	%rc2, %r15;
	mul.ftz.f32 	%f44, %f65, %f34;
	.loc 5 633 5
	cvt.sat.ftz.f32.f32 	%f45, %f44;
	.loc 2 118 1
	mul.ftz.f32 	%f46, %f45, 0f437F0000;
	.loc 5 1386 5
	cvt.rzi.ftz.u32.f32 	%r16, %f46;
	.loc 2 118 1
	cvt.u8.u32 	%rc3, %r16;
	mov.u16 	%rc4, 0;
	.loc 6 1351 1
	mul.ftz.f32 	%f47, %f66, 0f3F371759;
	fma.rn.ftz.f32 	%f48, %f65, 0f3E59B3D0, %f47;
	fma.rn.ftz.f32 	%f49, %f67, 0f3D93DD98, %f48;
	.loc 2 132 1
	add.ftz.f32 	%f50, %f49, 0f3A83126F;
	.loc 5 544 5
	lg2.approx.ftz.f32 	%f51, %f50;
	.loc 7 2386 3
	mul.ftz.f32 	%f52, %f51, 0f3F317218;
	.loc 2 132 1
	ld.global.v2.u32 	{%r23, %r24}, [launchIndex];
	cvt.u64.u32 	%rd4, %r23;
	cvt.u64.u32 	%rd5, %r24;
	cvta.global.u64 	%rd3, luminanceGPUBuffer;
	mov.u32 	%r7, 2;
	mov.u32 	%r8, 4;
	mov.u64 	%rd13, 0;
	// inline asm
	call (%rd2), _rt_buffer_get_64, (%rd3, %r7, %r8, %rd4, %rd5, %rd13, %rd13);
	// inline asm
	.loc 2 132 1
	st.f32 	[%rd2], %f52;
	.loc 2 133 1
	ld.global.v2.u32 	{%r25, %r26}, [launchIndex];
	cvt.u64.u32 	%rd10, %r25;
	cvt.u64.u32 	%rd11, %r26;
	cvta.global.u64 	%rd9, renderOutputBuffer;
	// inline asm
	call (%rd8), _rt_buffer_get_64, (%rd9, %r7, %r8, %rd10, %rd11, %rd13, %rd13);
	// inline asm
	st.v4.u8 	[%rd8], {%rc1, %rc2, %rc3, %rc4};
	.loc 2 134 2
	ret;
}

.visible .func  (.param .b64 func_retval0) _ZN5optix6bufferIfLi2EEixENS_7size_t2E(
	.param .b64 _ZN5optix6bufferIfLi2EEixENS_7size_t2E_param_0,
	.param .align 8 .b8 _ZN5optix6bufferIfLi2EEixENS_7size_t2E_param_1[16]
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<7>;


	ld.param.u64 	%rd2, [_ZN5optix6bufferIfLi2EEixENS_7size_t2E_param_0];
	ld.param.u64 	%rd3, [_ZN5optix6bufferIfLi2EEixENS_7size_t2E_param_1];
	ld.param.u64 	%rd4, [_ZN5optix6bufferIfLi2EEixENS_7size_t2E_param_1+8];
	mov.u32 	%r1, 2;
	mov.u32 	%r2, 4;
	mov.u64 	%rd6, 0;
	// inline asm
	call (%rd1), _rt_buffer_get_64, (%rd2, %r1, %r2, %rd3, %rd4, %rd6, %rd6);
	// inline asm
	st.param.b64	[func_retval0+0], %rd1;
	.loc 3 205 1
	ret;
}

.visible .func  (.param .b64 func_retval0) _ZN5optix6bufferI6uchar4Li2EEixENS_7size_t2E(
	.param .b64 _ZN5optix6bufferI6uchar4Li2EEixENS_7size_t2E_param_0,
	.param .align 8 .b8 _ZN5optix6bufferI6uchar4Li2EEixENS_7size_t2E_param_1[16]
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<7>;


	ld.param.u64 	%rd2, [_ZN5optix6bufferI6uchar4Li2EEixENS_7size_t2E_param_0];
	ld.param.u64 	%rd3, [_ZN5optix6bufferI6uchar4Li2EEixENS_7size_t2E_param_1];
	ld.param.u64 	%rd4, [_ZN5optix6bufferI6uchar4Li2EEixENS_7size_t2E_param_1+8];
	mov.u32 	%r1, 2;
	mov.u32 	%r2, 4;
	mov.u64 	%rd6, 0;
	// inline asm
	call (%rd1), _rt_buffer_get_64, (%rd2, %r1, %r2, %rd3, %rd4, %rd6, %rd6);
	// inline asm
	st.param.b64	[func_retval0+0], %rd1;
	.loc 3 205 1
	ret;
}

.visible .func  (.param .b64 func_retval0) _ZN5optix13rt_buffer_getEPvjjyyyy(
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_0,
	.param .b32 _ZN5optix13rt_buffer_getEPvjjyyyy_param_1,
	.param .b32 _ZN5optix13rt_buffer_getEPvjjyyyy_param_2,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_3,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_4,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_5,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_6
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<7>;


	ld.param.u64 	%rd2, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_0];
	ld.param.u32 	%r1, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_1];
	ld.param.u32 	%r2, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_2];
	ld.param.u64 	%rd3, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_3];
	ld.param.u64 	%rd4, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_4];
	ld.param.u64 	%rd5, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_5];
	ld.param.u64 	%rd6, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_6];
	// inline asm
	call (%rd1), _rt_buffer_get_64, (%rd2, %r1, %r2, %rd3, %rd4, %rd5, %rd6);
	// inline asm
	st.param.b64	[func_retval0+0], %rd1;
	.loc 4 131 1
	ret;
}


