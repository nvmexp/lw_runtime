//
// Generated by LWPU LWVM Compiler
// Compiler built on Sun Apr 08 00:53:32 2012 (1333839212)
// Lwca compilation tools, release 4.2, V0.2.1221
//

.version 3.0
.target sm_20
.address_size 64

	.file	1 "C:/Users/hautbois/AppData/Local/Temp/tmpxft_00000438_00000000-11_OptixGridGeometry.cpp3.i"
	.file	2 "OptixGridGeometry.lw"
	.file	3 "x:/dev/com.lwpu.lwca.4.2/include/device_functions.h"
	.file	4 "X:/Dev/com.lwpu.lwca.4.2/bin/ci_include.h"
	.file	5 "x:/dev/com.lwpu.optix.2.6/include/internal/optix_internal.h"
	.file	6 "x:/dev/com.lwpu.optix.2.6/include/optix_device.h"
.global .align 1 .b8 noise_buffer[1];
.global .align 8 .b8 noise_launch_index[8];
.global .align 8 .b8 noise_launch_dim[8];
.global .align 1 .b8 stratum_buffer[1];
.global .align 4 .u32 strata_2d_width;
.global .align 4 .u32 nbDiv;
.global .align 4 .u32 nbSubDiv;
.global .align 4 .u32 gridEnabled;
.global .align 4 .f32 divWidth;
.global .align 4 .f32 subDivWidth;
.global .align 8 .b8 ray[36];
.global .align 8 .b8 texcoord[12];
.global .align 8 .b8 geometric_normal[12];
.global .align 4 .u32 triangle_id;
.global .align 4 .b8 prd[572];
.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail9E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail2E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_xE;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;
.global .align 4 .b8 _ZN21rti_internal_typeinfo18noise_launch_indexE[8] = {82, 97, 121, 0, 8, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo16noise_launch_dimE[8] = {82, 97, 121, 0, 8, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo15strata_2d_widthE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo5nbDivE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo8nbSubDivE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo11gridEnabledE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo8divWidthE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo11subDivWidthE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo3rayE[8] = {82, 97, 121, 0, 36, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo8texcoordE[8] = {82, 97, 121, 0, 12, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo16geometric_normalE[8] = {82, 97, 121, 0, 12, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo11triangle_idE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo3prdE[8] = {82, 97, 121, 0, 60, 2, 0, 0};
.global .align 1 .b8 _ZN21rti_internal_typename18noise_launch_indexE[6] = {117, 105, 110, 116, 50, 0};
.global .align 1 .b8 _ZN21rti_internal_typename16noise_launch_dimE[6] = {117, 105, 110, 116, 50, 0};
.global .align 1 .b8 _ZN21rti_internal_typename15strata_2d_widthE[13] = {117, 110, 115, 105, 103, 110, 101, 100, 32, 105, 110, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename5nbDivE[13] = {117, 110, 115, 105, 103, 110, 101, 100, 32, 105, 110, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename8nbSubDivE[13] = {117, 110, 115, 105, 103, 110, 101, 100, 32, 105, 110, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename11gridEnabledE[13] = {117, 110, 115, 105, 103, 110, 101, 100, 32, 105, 110, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename8divWidthE[6] = {102, 108, 111, 97, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename11subDivWidthE[6] = {102, 108, 111, 97, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename3rayE[11] = {111, 112, 116, 105, 120, 58, 58, 82, 97, 121, 0};
.global .align 1 .b8 _ZN21rti_internal_typename8texcoordE[7] = {102, 108, 111, 97, 116, 51, 0};
.global .align 1 .b8 _ZN21rti_internal_typename16geometric_normalE[7] = {102, 108, 111, 97, 116, 51, 0};
.global .align 1 .b8 _ZN21rti_internal_typename11triangle_idE[4] = {105, 110, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename3prdE[16] = {82, 97, 100, 105, 97, 110, 99, 101, 82, 97, 121, 68, 97, 116, 97, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic18noise_launch_indexE[14] = {114, 116, 76, 97, 117, 110, 99, 104, 73, 110, 100, 101, 120, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic16noise_launch_dimE[12] = {114, 116, 76, 97, 117, 110, 99, 104, 68, 105, 109, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic15strata_2d_widthE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic5nbDivE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic8nbSubDivE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic11gridEnabledE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic8divWidthE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic11subDivWidthE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic3rayE[13] = {114, 116, 67, 117, 114, 114, 101, 110, 116, 82, 97, 121, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic8texcoordE[19] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 116, 101, 120, 99, 111, 111, 114, 100, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic16geometric_normalE[27] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 103, 101, 111, 109, 101, 116, 114, 105, 99, 95, 110, 111, 114, 109, 97, 108, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic11triangle_idE[22] = {97, 116, 116, 114, 105, 98, 117, 116, 101, 32, 116, 114, 105, 97, 110, 103, 108, 101, 95, 105, 100, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic3prdE[10] = {114, 116, 80, 97, 121, 108, 111, 97, 100, 0};
.global .align 1 .b8 _ZN23rti_internal_annotation18noise_launch_indexE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation16noise_launch_dimE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation15strata_2d_widthE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation5nbDivE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation8nbSubDivE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation11gridEnabledE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation8divWidthE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation11subDivWidthE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation3rayE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation8texcoordE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation16geometric_normalE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation11triangle_idE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation3prdE[1];

.entry _Z14grid_intersecti(
	.param .u32 _Z14grid_intersecti_param_0
)
{
	.reg .f32 	%f<83>;
	.reg .pred 	%p<21>;
	.reg .s32 	%r<12>;
	.reg .s64 	%rl<5>;


	ldu.global.u32 	%r1, [gridEnabled];
	.loc 2 24 1
	setp.eq.s32 	%p1, %r1, 0;
	@%p1 bra 	BB0_13;

	mov.u64 	%rl1, ray;
	add.s64 	%rl2, %rl1, 24;
	ldu.global.u32 	%r2, [%rl2];
	.loc 2 24 1
	setp.ne.s32 	%p2, %r2, 0;
	@%p2 bra 	BB0_3;

	mov.u64 	%rl3, prd;
	add.s64 	%rl4, %rl3, 528;
	ldu.global.u32 	%r3, [%rl4];
	.loc 2 24 1
	setp.gt.s32 	%p3, %r3, 0;
	@%p3 bra 	BB0_13;

BB0_3:
	ldu.global.u32 	%r4, [nbDiv];
	.loc 2 27 1
	cvt.rn.f32.u32 	%f11, %r4;
	neg.f32 	%f12, %f11;
	ldu.global.f32 	%f1, [divWidth];
	.loc 2 27 1
	sub.f32 	%f13, %f12, %f1;
	.loc 2 28 1
	add.f32 	%f14, %f11, %f1;
	ldu.global.u32 	%r5, [nbSubDiv];
	.loc 2 32 1
	cvt.rn.f32.u32 	%f15, %r5;
	.loc 2 35 1
	ld.global.f32 	%f16, [ray+8];
	ld.global.v2.f32 	{%f81, %f82}, [ray];
	sub.f32 	%f18, %f13, %f81;
	mov.f32 	%f19, 0f00000000;
	.loc 2 35 1
	sub.f32 	%f21, %f19, %f82;
	sub.f32 	%f22, %f13, %f16;
	ld.global.f32 	%f23, [ray+20];
	ld.global.f32 	%f24, [ray+16];
	ld.global.f32 	%f25, [ray+12];
	.loc 3 1311 3
	div.rn.f32 	%f26, %f18, %f25;
	div.rn.f32 	%f27, %f21, %f24;
	div.rn.f32 	%f28, %f22, %f23;
	.loc 2 36 1
	sub.f32 	%f29, %f14, %f81;
	sub.f32 	%f30, %f14, %f16;
	.loc 3 1311 3
	div.rn.f32 	%f31, %f29, %f25;
	div.rn.f32 	%f32, %f30, %f23;
	.loc 4 423 5
	min.f32 	%f33, %f26, %f31;
	min.f32 	%f34, %f27, %f27;
	min.f32 	%f35, %f28, %f32;
	.loc 4 435 5
	max.f32 	%f36, %f26, %f31;
	max.f32 	%f37, %f27, %f27;
	max.f32 	%f38, %f28, %f32;
	.loc 4 435 5
	max.f32 	%f39, %f33, %f34;
	max.f32 	%f2, %f39, %f35;
	.loc 4 423 5
	min.f32 	%f40, %f36, %f37;
	min.f32 	%f3, %f40, %f38;
	.loc 2 43 1
	fma.rn.f32 	%f41, %f25, %f2, %f81;
	fma.rn.f32 	%f42, %f24, %f2, %f82;
	fma.rn.f32 	%f43, %f23, %f2, %f16;
	.loc 2 44 1
	mul.f32 	%f44, %f42, 0f00000000;
	fma.rn.f32 	%f45, %f42, 0f00000000, %f41;
	fma.rn.f32 	%f46, %f43, 0f00000000, %f45;
	.loc 2 45 1
	fma.rn.f32 	%f47, %f41, 0f00000000, %f44;
	add.f32 	%f48, %f47, %f43;
	.loc 2 46 1
	mul.f32 	%f49, %f41, %f15;
	fma.rn.f32 	%f50, %f42, 0f00000000, %f49;
	fma.rn.f32 	%f51, %f43, 0f00000000, %f50;
	.loc 2 47 1
	fma.rn.f32 	%f52, %f43, %f15, %f47;
	.loc 4 373 5
	cvt.rmi.f32.f32 	%f53, %f46;
	.loc 2 48 1
	sub.f32 	%f4, %f46, %f53;
	.loc 4 373 5
	cvt.rmi.f32.f32 	%f54, %f48;
	.loc 2 49 1
	sub.f32 	%f5, %f48, %f54;
	.loc 4 373 5
	cvt.rmi.f32.f32 	%f55, %f51;
	.loc 2 50 1
	sub.f32 	%f6, %f51, %f55;
	.loc 4 373 5
	cvt.rmi.f32.f32 	%f56, %f52;
	.loc 2 51 1
	sub.f32 	%f7, %f52, %f56;
	ldu.global.f32 	%f8, [subDivWidth];
	.loc 2 53 1
	setp.leu.f32 	%p4, %f6, %f8;
	@%p4 bra 	BB0_7;

	mov.f32 	%f57, 0f3F800000;
	.loc 2 53 1
	sub.f32 	%f9, %f57, %f8;
	setp.lt.f32 	%p5, %f6, %f9;
	setp.gt.f32 	%p6, %f7, %f8;
	and.pred  	%p7, %p5, %p6;
	.loc 2 53 1
	@!%p7 bra 	BB0_7;

	setp.lt.f32 	%p8, %f7, %f9;
	.loc 2 55 1
	setp.gt.f32 	%p9, %f4, %f1;
	and.pred  	%p10, %p8, %p9;
	.loc 2 53 1
	@!%p10 bra 	BB0_7;

	.loc 2 55 1
	sub.f32 	%f10, %f57, %f1;
	setp.lt.f32 	%p11, %f4, %f10;
	setp.gt.f32 	%p12, %f5, %f1;
	and.pred  	%p13, %p11, %p12;
	.loc 2 55 1
	@%p13 bra 	BB0_8;

BB0_7:
	.loc 2 61 1
	setp.gtu.f32 	%p14, %f2, %f3;
	@%p14 bra 	BB0_13;
	bra.uni 	BB0_9;

BB0_8:
	.loc 2 55 1
	setp.lt.f32 	%p15, %f5, %f10;
	.loc 2 61 1
	setp.gtu.f32 	%p16, %f2, %f3;
	or.pred  	%p17, %p15, %p16;
	.loc 2 55 1
	@%p17 bra 	BB0_13;

BB0_9:
	// inline asm
	call (%r6), _rt_potential_intersection, (%f2);
	// inline asm
	.loc 5 114 1
	setp.eq.s32 	%p18, %r6, 0;
	.loc 2 63 1
	@%p18 bra 	BB0_11;

	mov.u32 	%r8, 0;
	.loc 2 64 1
	st.global.u32 	[texcoord+8], %r8;
	st.global.v2.f32 	[texcoord], {%f19, %f19};
	mov.f32 	%f61, 0f3F800000;
	.loc 2 65 1
	st.global.u32 	[geometric_normal+8], %r8;
	st.global.v2.f32 	[geometric_normal], {%f19, %f61};
	.loc 2 66 1
	st.global.u32 	[triangle_id], %r8;
	// inline asm
	call (%r7), _rt_report_intersection, (%r8);
	// inline asm
	.loc 2 70 1
	setp.ne.s32 	%p19, %r7, 0;
	@%p19 bra 	BB0_13;

BB0_11:
	// inline asm
	call (%r9), _rt_potential_intersection, (%f3);
	// inline asm
	.loc 5 114 1
	setp.eq.s32 	%p20, %r9, 0;
	.loc 2 71 1
	@%p20 bra 	BB0_13;

	mov.u32 	%r11, 0;
	.loc 2 72 1
	st.global.u32 	[texcoord+8], %r11;
	st.global.v2.f32 	[texcoord], {%f19, %f19};
	mov.f32 	%f64, 0f3F800000;
	.loc 2 73 1
	st.global.u32 	[geometric_normal+8], %r11;
	st.global.v2.f32 	[geometric_normal], {%f19, %f64};
	.loc 2 74 1
	st.global.u32 	[triangle_id], %r11;
	// inline asm
	call (%r10), _rt_report_intersection, (%r11);
	// inline asm

BB0_13:
	.loc 2 79 2
	ret;
}

.entry _Z11grid_boundsiPf(
	.param .u32 _Z11grid_boundsiPf_param_0,
	.param .u64 _Z11grid_boundsiPf_param_1
)
{
	.reg .f32 	%f<6>;
	.reg .s32 	%r<8>;
	.reg .s64 	%rl<3>;


	ld.param.u64 	%rl1, [_Z11grid_boundsiPf_param_1];
	cvta.to.global.u64 	%rl2, %rl1;
	ldu.global.u32 	%r1, [nbDiv];
	.loc 2 85 1
	cvt.rn.f32.u32 	%f1, %r1;
	neg.f32 	%f2, %f1;
	ldu.global.f32 	%f3, [divWidth];
	.loc 2 85 1
	sub.f32 	%f4, %f2, %f3;
	add.f32 	%f5, %f1, %f3;
	.loc 2 85 1
	st.global.f32 	[%rl2+4], %f3;
	st.global.f32 	[%rl2+8], %f4;
	st.global.f32 	[%rl2], %f4;
	st.global.f32 	[%rl2+20], %f5;
	st.global.f32 	[%rl2+16], %f3;
	st.global.f32 	[%rl2+12], %f5;
	.loc 2 86 2
	ret;
}


