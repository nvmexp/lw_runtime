//
// Generated by LWPU LWVM Compiler
// Compiler built on Tue Sep 25 17:26:26 2012 (1348590386)
// Lwca compilation tools, release 5.0, V0.2.1221
//

.version 3.1
.target sm_20
.address_size 64

	.file	1 "C:/Users/craigh/AppData/Local/Temp/tmpxft_00000bd8_00000000-11_kernel.cpp3.i"
	.file	2 "C:\\Users\\craigh\\AppData\\Local\\Temp\\optix1660\\kernel.lw"
	.file	3 "C:/Program Files/LWPU GPU Computing Toolkit/LWCA/v5.0/lwvm/ci_include.h"
	.file	4 "c:\\program files\\lwpu gpu computing toolkit\\lwca\\v5.0\\include\\math_functions.h"
	.file	5 "d:\\svn\\realrt\\build\\plugin_data\\optixrenderer_basicrelwrsive\\kernels\\optix\\internal/optix_internal.h"
	.file	6 "d:\\svn\\realrt\\build\\plugin_data\\optixrenderer_basicrelwrsive\\kernels\\optix\\optix_device.h"
.global .align 8 .b8 launchIndex[8];
.global .align 4 .b8 kIncomingRay[36];
.global .texref kdSkyMap;
.global .align 16 .b8 radiancePrd[32];
.global .align 1 .b8 lightBuffer[1];
.global .align 8 .u64 _ZN21rti_internal_register20reg_bitness_detectorE;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail0E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail1E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail2E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail3E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail4E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail5E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail6E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail7E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail8E;
.global .align 8 .u64 _ZN21rti_internal_register24reg_exception_64_detail9E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail0E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail1E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail2E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail3E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail4E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail5E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail6E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail7E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail8E;
.global .align 4 .u32 _ZN21rti_internal_register21reg_exception_detail9E;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_xE;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_yE;
.global .align 4 .u32 _ZN21rti_internal_register14reg_rayIndex_zE;
.const .align 4 .u32 kLightCacheSize = 5;
.global .align 4 .f32 kdSkyMapScale = 0f3F800000;
.global .align 4 .b8 _ZN21rti_internal_typeinfo11launchIndexE[8] = {82, 97, 121, 0, 8, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo12kIncomingRayE[8] = {82, 97, 121, 0, 36, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo13kdSkyMapScaleE[8] = {82, 97, 121, 0, 4, 0, 0, 0};
.global .align 4 .b8 _ZN21rti_internal_typeinfo11radiancePrdE[8] = {82, 97, 121, 0, 32, 0, 0, 0};
.global .align 1 .b8 _ZN21rti_internal_typename11launchIndexE[6] = {117, 105, 110, 116, 50, 0};
.global .align 1 .b8 _ZN21rti_internal_typename12kIncomingRayE[11] = {111, 112, 116, 105, 120, 58, 58, 82, 97, 121, 0};
.global .align 1 .b8 _ZN21rti_internal_typename13kdSkyMapScaleE[6] = {102, 108, 111, 97, 116, 0};
.global .align 1 .b8 _ZN21rti_internal_typename11radiancePrdE[12] = {82, 97, 100, 105, 97, 110, 99, 101, 80, 114, 100, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic11launchIndexE[14] = {114, 116, 76, 97, 117, 110, 99, 104, 73, 110, 100, 101, 120, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic12kIncomingRayE[13] = {114, 116, 67, 117, 114, 114, 101, 110, 116, 82, 97, 121, 0};
.global .align 1 .b8 _ZN21rti_internal_semantic13kdSkyMapScaleE[1];
.global .align 1 .b8 _ZN21rti_internal_semantic11radiancePrdE[10] = {114, 116, 80, 97, 121, 108, 111, 97, 100, 0};
.global .align 1 .b8 _ZN23rti_internal_annotation11launchIndexE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation12kIncomingRayE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation13kdSkyMapScaleE[1];
.global .align 1 .b8 _ZN23rti_internal_annotation11radiancePrdE[1];

.visible .entry _Z12radianceMissv(

)
{
	.reg .pred 	%p<15>;
	.reg .s32 	%r<19>;
	.reg .f32 	%f<97>;
	.reg .s64 	%rd<14>;


	.loc 2 20 1
	ld.global.f32 	%f17, [kIncomingRay+16];
	.loc 3 392 5
	abs.ftz.f32 	%f18, %f17;
	mov.f32 	%f96, 0f3F800000;
	.loc 4 9348 3
	sub.ftz.f32 	%f20, %f96, %f18;
	.loc 4 9349 3
	mul.ftz.f32 	%f21, %f20, 0f3F000000;
	.loc 3 996 5
	sqrt.approx.ftz.f32 	%f22, %f21;
	.loc 4 9351 3
	setp.gt.ftz.f32 	%p1, %f18, 0f3F11EB85;
	selp.f32 	%f23, %f22, %f18, %p1;
	.loc 4 9312 3
	mul.ftz.f32 	%f24, %f23, %f23;
	mov.f32 	%f25, 0f3C94D2E9;
	mov.f32 	%f26, 0f3D53F941;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f27, %f26, %f24, %f25;
	mov.f32 	%f28, 0f3D3F841F;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f29, %f27, %f24, %f28;
	mov.f32 	%f30, 0f3D994929;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f31, %f29, %f24, %f30;
	mov.f32 	%f32, 0f3E2AAB94;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f33, %f31, %f24, %f32;
	.loc 4 9318 3
	mul.ftz.f32 	%f34, %f33, %f24;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f35, %f34, %f23, %f23;
	.loc 4 9353 3
	add.ftz.f32 	%f36, %f35, %f35;
	mov.f32 	%f37, 0f3FC90FDB;
	.loc 4 9353 3
	sub.ftz.f32 	%f38, %f37, %f35;
	selp.f32 	%f39, %f36, %f38, %p1;
	.loc 3 1785 5
	mov.b32 	%r2, %f17;
	.loc 4 9354 3
	setp.lt.s32 	%p2, %r2, 0;
	mov.f32 	%f40, 0f40490FDB;
	.loc 4 9355 5
	sub.ftz.f32 	%f41, %f40, %f39;
	.loc 4 9354 3
	selp.f32 	%f42, %f41, %f39, %p2;
	.loc 2 20 1
	mul.ftz.f32 	%f1, %f42, 0f3EA2F983;
	.loc 2 21 1
	ld.global.f32 	%f2, [kIncomingRay+20];
	.loc 3 392 5
	abs.ftz.f32 	%f3, %f2;
	.loc 2 21 1
	ld.global.f32 	%f4, [kIncomingRay+12];
	.loc 3 392 5
	abs.ftz.f32 	%f5, %f4;
	.loc 4 9260 3
	setp.eq.ftz.f32 	%p3, %f5, 0f00000000;
	setp.eq.ftz.f32 	%p4, %f3, 0f00000000;
	and.pred  	%p5, %p3, %p4;
	.loc 3 1785 5
	mov.b32 	%r3, %f4;
	.loc 4 9262 5
	and.b32  	%r1, %r3, -2147483648;
	.loc 4 9260 3
	@%p5 bra 	BB0_4;

	mov.u32 	%r4, 2139095040;
	.loc 3 1778 5
	mov.b32 	%f6, %r4;
	.loc 4 9263 10
	setp.eq.ftz.f32 	%p6, %f5, %f6;
	setp.eq.ftz.f32 	%p7, %f3, %f6;
	and.pred  	%p8, %p6, %p7;
	@%p8 bra 	BB0_3;

	.loc 3 420 5
	min.ftz.f32 	%f43, %f5, %f3;
	.loc 3 432 5
	max.ftz.f32 	%f44, %f5, %f3;
	.loc 4 9271 5
	div.full.ftz.f32 	%f45, %f43, %f44;
	.loc 3 1151 5
	mul.rn.ftz.f32 	%f46, %f45, %f45;
	mov.f32 	%f47, 0fC0B59883;
	mov.f32 	%f48, 0fBF52C7EA;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f49, %f46, %f48, %f47;
	mov.f32 	%f50, 0fC0D21907;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f51, %f49, %f46, %f50;
	.loc 4 8468 3
	mul.ftz.f32 	%f52, %f51, %f46;
	.loc 4 8469 3
	mul.ftz.f32 	%f53, %f52, %f45;
	.loc 4 8470 3
	add.ftz.f32 	%f54, %f46, 0f41355DC0;
	mov.f32 	%f55, 0f41E6BD60;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f56, %f54, %f46, %f55;
	mov.f32 	%f57, 0f419D92C8;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f58, %f56, %f46, %f57;
	.loc 4 8473 3
	rcp.approx.ftz.f32 	%f59, %f58;
	.loc 3 647 5
	fma.rn.ftz.f32 	%f60, %f53, %f59, %f45;
	.loc 4 9274 5
	sub.ftz.f32 	%f62, %f37, %f60;
	setp.gt.ftz.f32 	%p9, %f5, %f3;
	selp.f32 	%f63, %f62, %f60, %p9;
	.loc 4 9275 5
	sub.ftz.f32 	%f65, %f40, %f63;
	setp.lt.ftz.f32 	%p10, %f2, 0f00000000;
	selp.f32 	%f66, %f65, %f63, %p10;
	.loc 3 1785 5
	mov.b32 	%r5, %f66;
	.loc 4 9276 5
	or.b32  	%r6, %r1, %r5;
	.loc 3 1778 5
	mov.b32 	%f67, %r6;
	.loc 4 9277 5
	add.ftz.f32 	%f68, %f4, %f2;
	.loc 4 9278 5
	setp.gtu.ftz.f32 	%p11, %f68, %f6;
	selp.f32 	%f95, %f68, %f67, %p11;
	bra.uni 	BB0_5;

BB0_3:
	.loc 3 1785 5
	mov.b32 	%r7, %f2;
	.loc 4 9264 5
	setp.lt.s32 	%p12, %r7, 0;
	selp.f32 	%f69, 0f4016CBE4, 0f3F490FDB, %p12;
	.loc 3 1785 5
	mov.b32 	%r8, %f69;
	.loc 4 9265 5
	or.b32  	%r9, %r1, %r8;
	.loc 3 1778 5
	mov.b32 	%f95, %r9;
	bra.uni 	BB0_5;

BB0_4:
	.loc 3 1785 5
	mov.b32 	%r10, %f2;
	.loc 4 9261 5
	setp.lt.s32 	%p13, %r10, 0;
	selp.f32 	%f70, 0f40490FDB, 0f00000000, %p13;
	.loc 3 1785 5
	mov.b32 	%r11, %f70;
	.loc 4 9262 5
	or.b32  	%r12, %r1, %r11;
	.loc 3 1778 5
	mov.b32 	%f95, %r12;

BB0_5:
	.loc 2 21 1
	fma.rn.ftz.f32 	%f75, %f95, 0f3E22F983, 0f3F000000;
	mov.f32 	%f77, 0f3F000000;
	mov.f32 	%f78, 0f00000000;
	// inline asm
	tex.3d.v4.f32.f32 {%f71, %f72, %f73, %f74}, [kdSkyMap, {%f75, %f1, %f77, %f78}];
	// inline asm
	.loc 2 27 1
	cvta.global.u64 	%rd7, lightBuffer;
	mov.u32 	%r13, 1;
	mov.u32 	%r14, 64;
	// inline asm
	call (%rd3, %rd4, %rd5, %rd6), _rt_buffer_get_size_64, (%rd7, %r13, %r14);
	// inline asm
	.loc 2 27 1
	cvt.u32.u64 	%r15, %rd3;
	setp.eq.s32 	%p14, %r15, 0;
	@%p14 bra 	BB0_7;

	mov.u64 	%rd13, 0;
	// inline asm
	call (%rd8), _rt_buffer_get_64, (%rd7, %r13, %r14, %rd13, %rd13, %rd13, %rd13);
	// inline asm
	.loc 2 27 1
	ld.f32 	%f96, [%rd8+28];

BB0_7:
	.loc 2 30 1
	ld.global.f32 	%f80, [kdSkyMapScale];
	fma.rn.ftz.f32 	%f81, %f74, %f80, 0f3F800000;
	mul.ftz.f32 	%f82, %f71, %f81;
	mul.ftz.f32 	%f83, %f72, %f81;
	mul.ftz.f32 	%f84, %f73, %f81;
	mul.ftz.f32 	%f85, %f82, %f96;
	mul.ftz.f32 	%f86, %f83, %f96;
	mul.ftz.f32 	%f87, %f84, %f96;
	ld.global.f32 	%f88, [radiancePrd+12];
	.loc 2 31 1
	ld.global.f32 	%f89, [radiancePrd];
	fma.rn.ftz.f32 	%f90, %f85, %f88, %f89;
	st.global.f32 	[radiancePrd], %f90;
	ld.global.f32 	%f91, [radiancePrd+4];
	fma.rn.ftz.f32 	%f92, %f86, %f88, %f91;
	st.global.f32 	[radiancePrd+4], %f92;
	ld.global.f32 	%f93, [radiancePrd+8];
	fma.rn.ftz.f32 	%f94, %f87, %f88, %f93;
	st.global.f32 	[radiancePrd+8], %f94;
	.loc 2 32 2
	ret;
}

.visible .func  (.param .b64 func_retval0) _ZNK5optix6bufferI5LightLi1EE4sizeEv(
	.param .b64 _ZNK5optix6bufferI5LightLi1EE4sizeEv_param_0
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<7>;


	ld.param.u64 	%rd5, [_ZNK5optix6bufferI5LightLi1EE4sizeEv_param_0];
	mov.u32 	%r1, 1;
	mov.u32 	%r2, 64;
	// inline asm
	call (%rd1, %rd2, %rd3, %rd4), _rt_buffer_get_size_64, (%rd5, %r1, %r2);
	// inline asm
	.loc 6 201 1
	and.b64  	%rd6, %rd1, 4294967295;
	st.param.b64	[func_retval0+0], %rd6;
	ret;
}

.visible .func  (.param .b64 func_retval0) _ZN5optix6bufferI5LightLi1EEixEy(
	.param .b64 _ZN5optix6bufferI5LightLi1EEixEy_param_0,
	.param .b64 _ZN5optix6bufferI5LightLi1EEixEy_param_1
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<7>;


	ld.param.u64 	%rd2, [_ZN5optix6bufferI5LightLi1EEixEy_param_0];
	ld.param.u64 	%rd3, [_ZN5optix6bufferI5LightLi1EEixEy_param_1];
	mov.u32 	%r1, 1;
	mov.u32 	%r2, 64;
	mov.u64 	%rd6, 0;
	// inline asm
	call (%rd1), _rt_buffer_get_64, (%rd2, %r1, %r2, %rd3, %rd6, %rd6, %rd6);
	// inline asm
	st.param.b64	[func_retval0+0], %rd1;
	.loc 6 205 1
	ret;
}

.visible .func  (.param .align 8 .b8 func_retval0[32]) _ZN5optix18rt_buffer_get_sizeEPKvjj(
	.param .b64 _ZN5optix18rt_buffer_get_sizeEPKvjj_param_0,
	.param .b32 _ZN5optix18rt_buffer_get_sizeEPKvjj_param_1,
	.param .b32 _ZN5optix18rt_buffer_get_sizeEPKvjj_param_2
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<6>;


	ld.param.u64 	%rd5, [_ZN5optix18rt_buffer_get_sizeEPKvjj_param_0];
	ld.param.u32 	%r1, [_ZN5optix18rt_buffer_get_sizeEPKvjj_param_1];
	ld.param.u32 	%r2, [_ZN5optix18rt_buffer_get_sizeEPKvjj_param_2];
	// inline asm
	call (%rd1, %rd2, %rd3, %rd4), _rt_buffer_get_size_64, (%rd5, %r1, %r2);
	// inline asm
	st.param.b64	[func_retval0+0], %rd1;
	st.param.b64	[func_retval0+8], %rd2;
	st.param.b64	[func_retval0+16], %rd3;
	st.param.b64	[func_retval0+24], %rd4;
	.loc 5 142 1
	ret;
}

.visible .func  (.param .b64 func_retval0) _ZN5optix13rt_buffer_getEPvjjyyyy(
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_0,
	.param .b32 _ZN5optix13rt_buffer_getEPvjjyyyy_param_1,
	.param .b32 _ZN5optix13rt_buffer_getEPvjjyyyy_param_2,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_3,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_4,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_5,
	.param .b64 _ZN5optix13rt_buffer_getEPvjjyyyy_param_6
)
{
	.reg .s32 	%r<3>;
	.reg .s64 	%rd<7>;


	ld.param.u64 	%rd2, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_0];
	ld.param.u32 	%r1, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_1];
	ld.param.u32 	%r2, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_2];
	ld.param.u64 	%rd3, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_3];
	ld.param.u64 	%rd4, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_4];
	ld.param.u64 	%rd5, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_5];
	ld.param.u64 	%rd6, [_ZN5optix13rt_buffer_getEPvjjyyyy_param_6];
	// inline asm
	call (%rd1), _rt_buffer_get_64, (%rd2, %r1, %r2, %rd3, %rd4, %rd5, %rd6);
	// inline asm
	st.param.b64	[func_retval0+0], %rd1;
	.loc 5 131 1
	ret;
}


